#! /bin/bash
echo '-------------------------'
echo ' TEST DATABASE'
echo '-------------------------'
echo '# --- migrate test db'
echo 'rake db:migrate RAILS_ENV=test'
echo ''
echo '-------------------------'
echo ' ALLOW RECIEVE AND RETURN'
echo '-------------------------'
echo '# --- allow receive hash key -- example mocks `term_controller.params`'
echo 'allow(term_controller).to receive(:params).with(:name).and_return("My Name")'
echo ''
echo '# --- allow receive hash key -- example mocks `request.path_parameters[:action]` # "search"'
echo 'allow(request).to receive_message_chain(:path_parameters, :[]).with(:action).and_return("search")'
echo ''
echo '# ---  stub config setting'
echo 'allow(QaServer).to receive_message_chain(:config, :suppress_performance_gathering?).and_return(true)'
echo ''
echo '-------------------------'
echo ' SETUP CONSTANTS'
echo '-------------------------'
echo '# --- stub an environment variable'
echo 'before { stub_const('ENV', 'MAX_PERFORMANCE_CACHE_SIZE' => '8 gb') }'
echo ''
echo '-------------------------'
echo ' MATHCERS'
echo '-------------------------'
echo '# --- array'
echo '#  unordered'
echo 'expect([1,2,3]).to include(2,1,3)'
echo '#  items in include must exist in tested array, but can be a subset'
echo 'expect([1,2,3]).to include(1,3)' 
echo '#  cannot have items in the include that are not in the tested array'
echo 'FAILS: expect([1,2,3]).to include(1,4)' 
echo ''
echo '#  unordered'
echo 'expect([1,2,3]).to match_array [2,1,3]'
echo '#  items in include must exist in tested array, but can be a subset'
echo 'expect([1,2,3]).to match_array [1,3]'
echo '#  cannot have items in the match array that are not in the tested array'
echo 'FAILS: expect([1,2,3]).to match_array [1,2,4])'
echo ''
echo '# --- true/false'
echo 'expect().to be true'
echo 'expect().to be false'
echo ''

